{"version":3,"file":"pages/app/catalog/collections/createnewcollection/_id.js","sources":["webpack:///./utils/slugLoader.ts","webpack:///./pages/app/catalog/collections/createnewcollection/_id.vue?1ade","webpack:///./pages/app/catalog/collections/createnewcollection/_id.vue","webpack:///./pages/app/catalog/collections/createnewcollection/_id.vue?b61d","webpack:///./pages/app/catalog/collections/createnewcollection/_id.vue?3c64"],"sourcesContent":["import slugify from 'slugify'\nimport uniqid from 'uniqid'\n\nexport function SlugLoader(text: string) {\n    const thisSlug = slugify(text, {\n        lower: true,\n        strict: true,\n    }) + '-' + uniqid()\n    return thisSlug\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._ssrNode(\"<div class=\\\"d-flex flex-column-fluid\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\" container-fluid \\\">\",\"</div>\",[_vm._ssrNode(\"<div id=\\\"kt_subheader\\\" class=\\\"subheader py-2 py-lg-4  subheader-transparent \\\"><div class=\\\"d-flex align-items-center justify-content-between flex-wrap flex-sm-nowrap w-100\\\"><div class=\\\"d-flex align-items-center flex-wrap mr-2\\\"><h5 class=\\\"text-dark font-weight-bold mt-2 mb-2 mr-5\\\">\"+_vm._ssrEscape(\"Create Sub Collection | Root: \"+_vm._s(_vm.rname))+\"</h5> <div class=\\\"subheader-separator subheader-separator-ver mt-2 mb-2 mr-5 bg-gray-200\\\"></div></div> <div class=\\\"d-flex align-items-center\\\"><a href=\\\"#\\\"></a></div></div></div> \"),_vm._ssrNode(\"<div class=\\\"card\\\">\",\"</div>\",[_vm._ssrNode(((_vm.$apollo.queries.collection.loading)?(\"<div class=\\\"d-flex justify-content-center align-items-center m-20 w-100\\\"><div class=\\\"spinner spinner-primary spinner-lg mr-15\\\"></div></div>\"):\"<!---->\")+\" \"),_vm._ssrNode(\"<div class=\\\"card-body\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"form-group\\\">\",\"</div>\",[_vm._ssrNode(\"<label>Enter Collection Name</label> \"),_c('a-input',{model:{value:(_vm.name),callback:function ($$v) {_vm.name=$$v},expression:\"name\"}}),_vm._ssrNode(\" <small class=\\\"form-text text-muted\\\">\"+_vm._ssrEscape(_vm._s(_vm.$t('store.storenameinfo')))+\"</small>\")],2),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"form-group\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"d-flex justify-content-between\\\">\",\"</div>\",[_vm._ssrNode(\"<label>Include In Menu</label> \"),_c('a-switch',{attrs:{\"active-color\":\"#13ce66\",\"inactive-color\":\"#ff4949\"},model:{value:(_vm.inMenu),callback:function ($$v) {_vm.inMenu=$$v},expression:\"inMenu\"}})],2),_vm._ssrNode(\" <small class=\\\"form-text text-muted\\\">\"+_vm._ssrEscape(_vm._s(_vm.$t('store.storenameinfo')))+\"</small>\")],2),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"form-group\\\">\",\"</div>\",[_vm._ssrNode(\"<label>Enter Collection Title Description</label> \"),_c('a-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.desc),callback:function ($$v) {_vm.desc=$$v},expression:\"desc\"}}),_vm._ssrNode(\" <small class=\\\"form-text text-muted\\\">\"+_vm._ssrEscape(_vm._s(_vm.$t('store.storenameinfo')))+\"</small>\")],2),_vm._ssrNode(\" <div style=\\\"margin-bottom: 10px\\\"><h6 class=\\\"text-secondary\\\">SEO</h6></div> <hr style=\\\"margin-bottom: 10px\\\"> \"),_vm._ssrNode(\"<div class=\\\"form-group\\\">\",\"</div>\",[_vm._ssrNode(\"<label>Enter Meta URL</label> \"),_c('a-input',{attrs:{\"disabled\":true},model:{value:(_vm.metaUrl),callback:function ($$v) {_vm.metaUrl=$$v},expression:\"metaUrl\"}}),_vm._ssrNode(\" <small class=\\\"form-text text-muted\\\">\"+_vm._ssrEscape(_vm._s(_vm.$t('store.storenameinfo')))+\"</small>\")],2),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"form-group\\\">\",\"</div>\",[_vm._ssrNode(\"<label>Enter Meta Title</label> \"),_c('a-input',{model:{value:(_vm.metaTitle),callback:function ($$v) {_vm.metaTitle=$$v},expression:\"metaTitle\"}}),_vm._ssrNode(\" <small class=\\\"form-text text-muted\\\">\"+_vm._ssrEscape(_vm._s(_vm.$t('store.storenameinfo')))+\"</small>\")],2),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"form-group\\\">\",\"</div>\",[_vm._ssrNode(\"<label>Enter Meta Keywords</label> \"),_c('vue-tags-input',{attrs:{\"tags\":_vm.metaKeywords,\"placeholder\":\"Enter keywords\"},on:{\"tags-changed\":function (newTags) { return _vm.metaKeywords = newTags; }},model:{value:(_vm.metaKey),callback:function ($$v) {_vm.metaKey=$$v},expression:\"metaKey\"}}),_vm._ssrNode(\" <small class=\\\"form-text text-muted\\\">\"+_vm._ssrEscape(_vm._s(_vm.$t('store.storenameinfo')))+\"</small>\")],2),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"form-group\\\">\",\"</div>\",[_vm._ssrNode(\"<label>Enter Meta Description</label> \"),_c('a-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.metaDesc),callback:function ($$v) {_vm.metaDesc=$$v},expression:\"metaDesc\"}}),_vm._ssrNode(\" <small class=\\\"form-text text-muted\\\">\"+_vm._ssrEscape(_vm._s(_vm.$t('store.storenameinfo')))+\"</small>\")],2),_vm._ssrNode(\" <div><button type=\\\"button\\\"\"+(_vm._ssrClass(\"btn btn-light-primary\",{'spinner spinner-darker-primary spinner-left mr-3': _vm.loading}))+\">\\n                            Create Collection\\n                        </button> <button type=\\\"button\\\" class=\\\"btn btn-light-danger\\\">Cancel</button></div>\")],2)],2)],2)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {Component, Vue, Watch} from 'vue-property-decorator';\nimport {\n    AddParentToChildCollectionDocument,\n    AddParentToChildCollectionMutationVariables,\n    Collection,\n    CreateOneCollectionDocument,\n    CreateOneCollectionMutationVariables,\n    CreateOneSeoDocument,\n    CreateOneSeoMutationVariables,\n    GetOneCollectionDocument,\n    Seo,\n    SetSeoOnCollectionDocument,\n    SetSeoOnCollectionMutationVariables\n} from '../../../../../gql';\nimport {SlugLoader} from '../../../../../utils/slugLoader';\n\n@Component({\n    layout: 'console',\n    apollo: {\n        collection: {\n            query: GetOneCollectionDocument,\n            variables() {\n                return {\n                    id: this.$route.params.id\n                }\n            }\n        }\n    }\n})\nexport default class CreateSubNewCollection extends Vue {\n    // root collection\n    private rname = ''\n\n    // new sub root\n    private name: string = ''\n    private desc: string = ''\n    private inMenu: boolean = true\n    private isPrivate: boolean = true\n    private metaUrl: string = ''\n    private metaTitle: string = ''\n    private metaDesc: string = ''\n    private metaKeywords: any[] = []\n    private existing: string[] = []\n    private isRoot: boolean = false\n    private metaKey: string = ''\n\n    private loading = false\n\n    private collection\n\n    handleCreateKeyword(val) {\n        this.existing.push(val)\n        this.metaKeywords.push(val)\n    }\n\n    @Watch('collection')\n    onCollectionChange() {\n        this.rname = this.collection.name\n    }\n\n\n    mounted() {\n    }\n\n    @Watch('name')\n    onChangeName() {\n        this.metaUrl = SlugLoader(this.name)\n    }\n\n    onGoBack() {\n        this.$router.back()\n    }\n\n    onCreatCollection() {\n        this.loading = true\n        const load = this.$message\n            .loading('Creating Collection..')\n        this.$apollo.mutate<{ createOneCollection: Collection }, CreateOneCollectionMutationVariables>({\n            mutation: CreateOneCollectionDocument,\n            variables: {\n                isRoot: this.isRoot,\n                name: this.name,\n                desc: this.desc\n            }\n        }).then(value => {\n            this.$apollo.mutate<{ createOneSeo: Seo }, CreateOneSeoMutationVariables>({\n                mutation: CreateOneSeoDocument,\n                variables: {\n                    urlKey: this.metaUrl,\n                    metatitle: this.metaTitle,\n                    metakeywords: this.metaKeywords.map(item => item.text),\n                    metadesc: this.metaDesc\n                }\n            }).then(value1 => {\n\n                this.$apollo.mutate<{ setSeoOnCollection: Collection }, SetSeoOnCollectionMutationVariables>({\n                    mutation: SetSeoOnCollectionDocument,\n                    variables: {\n                        id: value.data!.createOneCollection!.id,\n                        relationId: value1.data!.createOneSeo!.id\n                    }\n                }).then(value2 => {\n                    this.$apollo.mutate<{ addChildrenToCollection: Collection }, AddParentToChildCollectionMutationVariables>({\n                        mutation: AddParentToChildCollectionDocument,\n                        variables: {\n                            childId: value.data!.createOneCollection!.id!,\n                            parentId: this.$route.params.id\n                        }\n                    }).then(value3 => {\n                        this.loading = false\n                        load()\n                        this.$router.back()\n                    }).catch(error => {\n                        this.loading = false\n                        load()\n                        this.$Message.error(error.message)\n                    })\n                }).catch(error => {\n                    this.loading = false\n                    load()\n                    this.$Message.error(error.message)\n                })\n            }).catch(error => {\n                this.loading = false\n                load()\n                this.$Message.error(error.message)\n            })\n        })\n    }\n\n}\n","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--12-0!../../../../../node_modules/ts-loader/index.js??ref--12-1!../../../../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./_id.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--12-0!../../../../../node_modules/ts-loader/index.js??ref--12-1!../../../../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./_id.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./_id.vue?vue&type=template&id=3d5ea49b&\"\nimport script from \"./_id.vue?vue&type=script&lang=ts&\"\nexport * from \"./_id.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  \"fe834d90\"\n  \n)\n\nexport default component.exports"],"mappings":";;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AAFA;AAIA;AACA;;;;;;;;;;;;ACTA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;ACsGA;AACA;AAaA;AAeA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAoFA;AACA;AAjFA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAHA;AAFA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAFA;AAUA;AACA;AACA;AACA;AACA;AAFA;AAFA;AAOA;AACA;AACA;AACA;AACA;AAFA;AAFA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApGA;AACA;AA0BA;AACA;AAQA;AACA;AArCA;AAZA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AADA;AAGA;AACA;AAPA;AADA;AAFA;AAaA;;ACrIA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}